/**
 * @module  lib/Ripple
 * @version 8.1490.1-20190715
 * @license Apache-2.0
 */
const eNames={pointerdown:PointerEvent?"pointerdown":"mousedown",pointerup:PointerEvent?"pointerup":"mouseup"},styleProperties={initialScale:.6,backgroundColor:"rgba(0,0,0,.06)",runningDuration:"300ms",opacityDuration:"83ms"},state={scopeEle:null,cssEle:null,currentEle:null,animating:!1,focusing:!1},Ripple={mark:"Ripple",_setStyleProperties(e,a){Object.keys(a).forEach(t=>{const n=a[t];e.style.setProperty(propName(t),n)})},_update(){Ripple._setStyleProperties(state.scopeEle,styleProperties)},set(e){Object.assign(styleProperties,e),Ripple._update()},load(e=document.body){if(!state.cssEle){const e=document.createElement("style");e.innerText=CSS(),document.body.appendChild(e),state.cssEle=e,Reflect.defineProperty(Ripple,"mark",{writable:!1})}e.addEventListener(eNames.pointerdown,Ripple.start),e.addEventListener(eNames.pointerup,Ripple.blur),e.addEventListener("animationend",Ripple.animationEnd),state.scopeEle=e,Ripple._update()},start({offsetX:e,offsetY:a,target:t}){if(!t.hasAttribute(Ripple.mark))return;state.currentEle&&Ripple.stop(),state.animating=!0,state.focusing=!0,state.currentEle=t;const{clientWidth:n,clientHeight:i}=t,r=Math.max(n,i),o=Math.hypot(n,i);Ripple._setStyleProperties(t,{center:`${n/2}px, ${i/2}px`,kissPoint:`${e}px, ${a}px`,longerSideLength:`${r}px`,eleDiameterToLongerSideLength:`${o/r}`}),t.classList.remove(animName("ended")),t.classList.add(animName("running"))},blur(){state.currentEle&&(state.focusing=!1,state.animating||Ripple.stop())},animationEnd({animationName:e}){state.currentEle&&e===animName("running")&&(state.animating=!1,state.focusing||Ripple.stop())},stop(){const{currentEle:e}=state;e.classList.remove(animName("running")),e.classList.add(animName("ended")),state.currentEle=null}};export default Ripple;const propName=e=>`--${Ripple.mark}-${e}`,animName=e=>`${Ripple.mark}-${e}`,CSS=(e=Ripple.mark)=>`[${e}]{position:relative;overflow:hidden;cursor:pointer;-webkit-tap-highlight-color:transparent}[${e}]>*{pointer-events:none}[${e}]::after,[${e}]::before{position:absolute;background:var(${propName("backgroundColor")});opacity:0;animation-fill-mode:forwards;pointer-events:none;content:''}[${e}]::before{top:-50%;left:-50%;width:200%;height:200%}[${e}]::after{${propName("rippleDiameter")}:calc(var(${propName("longerSideLength")}) * var(${propName("initialScale")}));${propName("scale")}:calc(var(${propName("eleDiameterToLongerSideLength")})/ var(${propName("initialScale")}));top:calc(var(${propName("rippleDiameter")})/ -2);left:calc(var(${propName("rippleDiameter")})/ -2);width:var(${propName("rippleDiameter")});height:var(${propName("rippleDiameter")});transform:translate(var(${propName("center")},0));transform-origin:center center;border-radius:50%}[${e}]:hover::after,[${e}]:hover::before{will-change:opacity,transform}[${e}].${animName("running")}::before{opacity:1;animation-name:${animName("opacityIn")};animation-duration:var(${propName("opacityDuration")})}[${e}].${animName("running")}::after{opacity:1;animation-name:${animName("running")},${animName("opacityIn")};animation-duration:var(${propName("runningDuration")}),var(${propName("opacityDuration")})}[${e}].${animName("ended")}::after,[${e}].${animName("ended")}::before{animation-name:${animName("opacityOut")};animation-duration:var(${propName("opacityDuration")})}[${e}].${animName("ended")}::after{transform:translate(var(${propName("center")},0)) scale(var(${propName("scale")}))}@keyframes ${animName("running")}{from{transform:translate(var(${propName("kissPoint")},0)) scale(1);animation-timing-function:cubic-bezier(.4,0,.2,1)}to{transform:translate(var(${propName("center")},0)) scale(var(${propName("scale")}))}}@keyframes ${animName("opacityIn")}{from{opacity:0;animation-timing-function:linear}to{opacity:1}}@keyframes ${animName("opacityOut")}{from{opacity:1;animation-timing-function:linear}to{opacity:0}}`;
